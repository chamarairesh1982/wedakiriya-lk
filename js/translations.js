window.translations = {
  en: {
    nav_home: "Home",
    nav_about: "About",
    nav_submit: "Submit Your Business",
    nav_contact: "Contact",
    hero_title: "Find the Best Local Services Near You",
    total_services: "Total Services",
    covered_cities: "Covered Cities",
    updated_weekly: "Updated Weekly",
    submit_cta: "Want your business listed? → Submit Now",
    filter_tailor: "Tailor",
    filter_electrician: "Electrician",
    filter_tutor: "Tutor",
    filter_ac: "AC Repair",
    filter_all: "All",
    search_placeholder: "Search by service or city...",
    cities_heading: "Cities",
    cities_search: "Search city",
    cities_load_error: "Failed to load cities",
    no_results: "No services match your search. Try another city or category.",
    about_heading: "About WedaKiriya.lk",
    about_p1: "WedaKiriya.lk is a community project connecting Sri Lankans with trusted local professionals and small businesses.",
    about_p2: "Our goal is to keep listings free and simple, helping every town showcase its best services.",
    why_heading: "Why WedaKiriya.lk?",
    why_1: "✓ 100% Free to use and list",
    why_2: "✓ Focused on local Sri Lankan towns",
    why_3: "✓ Fast, mobile-friendly design",
    why_4: "✓ Easy to contact service providers directly",
    how_heading: "How to List Your Business",
    how_p: "Share your service with thousands of locals by submitting our short form.",
    how_btn: "Submit Now",
    contact_heading: "Contact Us",
    contact_p: "Have a question, suggestion, or issue? Get in touch below.",
    form_name: "Full Name",
    form_email: "Email Address",
    form_message: "Message",
    form_submit: "Submit",
    whatsapp_now: "WhatsApp Now",
    view_details: "View Details",
    send: "Send",
    loading: "Loading...",
    not_found: "Service not found.",
    submit_heading: "Submit Your Business",
    submit_name: "Business Name",
    submit_owner: "Owner Name",
    submit_category: "Category",
    submit_contact: "Contact Info",
    submit_location: "Location",
    submit_description: "Description",
    submit_button: "Submit",
    submitting: "Submitting...",
    submit_success: "Submitted successfully!",
    network_error: "Network error:",
    config_error: "Error loading config:",
    error_prefix: "Error:"
  },
  si: {
    nav_home: "මුල් පිටුව",
    nav_about: "අපි ගැන",
    nav_submit: "ඔබගේ ව්‍යාපාරය යවන්න",
    nav_contact: "සම්බන්ධ වෙන්න",
    hero_title: "ඔබගේ ප්‍රදේශයේ හොඳම සේවා සොයන්න",
    total_services: "එකතුව සේවා",
    covered_cities: "අවරණය වූ නගර",
    updated_weekly: "සතියකට වරක් යාවත්කාලීන",
    submit_cta: "ඔබගේ ව්‍යාපාරය එකතු කරන්න? → දැන් යවන්න",
    filter_tailor: "හේත්තුව",
    filter_electrician: "විදුලි කාර්මික",
    filter_tutor: "ගුරු",
    filter_ac: "ඒසී අලුත්වැඩියා",
    filter_all: "සියල්ල",
    search_placeholder: "සේවාව හෝ නගරය සොයන්න...",
    cities_heading: "නගර",
    cities_search: "නගරය සොයන්න",
    cities_load_error: "නගර ලබාගැනීමට නොහැකි විය",
    no_results: "ඔබගේ සෙවුමට ගැලපෙන සේවාවක් නැත. වෙනත් නගරයක් හෝ ප්‍රවර්ගයක් උත්සාහ කරන්න.",
    about_heading: "WedaKiriya.lk ගැන",
    about_p1: "WedaKiriya.lk යනු ශ්‍රී ලාංකීය වෘත්තීයශීලීන් හා කුඩා ව්‍යාපාර සම්බන්ධ කිරීම සඳහා වූ ප්‍රජා ව්‍යාපෘතියකි.",
    about_p2: "එය සරල හා නොමිලේ තබා, සෑම නගරයක්ම තම හොඳම සේවා ඉදිරිපත් කිරීම අපගේ ඉලක්කයයි.",
    why_heading: "මන්ද WedaKiriya.lk?",
    why_1: "✓ 100% නොමිලේ",
    why_2: "✓ දේශීය නගර focusing",
    why_3: "✓ වේගවත්, ජංගම හිතකාමී නිර්මාණය",
    why_4: "✓ සේවා සපයන්නන් අමතීමට පහසු",
    how_heading: "ඔබගේ ව්‍යාපාරය ලැයිස්තුගත කිරීම කෙසේද",
    how_p: "අපගේ කෙටි පෝරමය භාවිතා කර ඔබගේ සේවාව එල්ලන්න.",
    how_btn: "දැන් යවන්න",
    contact_heading: "අප හා සම්බන්ධ වෙන්න",
    contact_p: "ගැටලුවක්, යෝජනාවක් හෝ ප්‍රශ්නයක් තිබේද? පහතින් සම්බන්ධ වන්න.",
    form_name: "පූර්ණ නම",
    form_email: "ඊමේල් ලිපිනය",
    form_message: "පණිවිඩය",
    form_submit: "යවන්න",
    whatsapp_now: "වට්සාප් කරන්න",
    view_details: "වැඩි විස්තර",
    send: "යවන්න",
    loading: "පූරණය වෙමින්...",
    not_found: "සේවාව හමු නොවීය.",
    submit_heading: "ඔබගේ ව්‍යාපාරය යවන්න",
    submit_name: "ව්‍යාපාරයේ නම",
    submit_owner: "හිමිකරුගේ නම",
    submit_category: "ව්‍යාපාර වර්ගය",
    submit_contact: "දුරකථන හෝ විද්‍යුත් ලිපිනය",
    submit_location: "නගරය",
    submit_description: "විස්තරය",
    submit_button: "යවන්න",
    submitting: "යවමින්...",
    submit_success: "සාර්ථකව යවා ඇත!",
    network_error: "ජාල ගැටලුව:",
    config_error: "වින්‍යාසය පූරණය කිරීමේ දෝෂය:",
    error_prefix: "දෝෂය:"
  }
};

window.currentLang = localStorage.getItem('lang') || 'en';

window.t = function (key) {
  const lang = window.currentLang;
  return (window.translations[lang] && window.translations[lang][key]) || key;
};

function applyTranslations() {
  document.documentElement.lang = window.currentLang;
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    const txt = window.t(key);
    if (txt) el.innerHTML = txt;
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    const txt = window.t(key);
    if (txt) el.placeholder = txt;
  });
}

document.addEventListener('DOMContentLoaded', () => {
  const toggle = document.getElementById('langToggle');
  if (toggle) {
    toggle.value = window.currentLang;
    toggle.addEventListener('change', () => {
      window.currentLang = toggle.value;
      localStorage.setItem('lang', window.currentLang);
      applyTranslations();
    });
  }
  applyTranslations();
});
